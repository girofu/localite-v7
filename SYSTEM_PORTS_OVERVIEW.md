# Localite ç³»çµ±ç«¯å£åˆ†é…ç¸½è¦½

## ğŸš€ ç«¯å£ä½¿ç”¨è¦åŠƒ

ç‚ºäº†é¿å…ç«¯å£è¡çªï¼ŒLocalite ç³»çµ±çš„å„å€‹æœå‹™åˆ†é…å¦‚ä¸‹ï¼š

### ä¸»è¦æœå‹™ç«¯å£

| æœå‹™åç¨±         | ç«¯å£ | URL                   | èªªæ˜                           |
| ---------------- | ---- | --------------------- | ------------------------------ |
| **ä¸»æ‡‰ç”¨ç¨‹å¼**   | 8081 | http://localhost:8081 | React Native / Expo é–‹ç™¼æœå‹™å™¨ |
| **ç®¡ç†å“¡ç³»çµ±**   | 3001 | http://localhost:3001 | ç®¡ç†å“¡å¾Œå°ä»‹é¢                 |
| **å•†å®¶ç³»çµ±**     | 3002 | http://localhost:3002 | å•†å®¶ç®¡ç†å¾Œå°                   |
| **æ—¥èªŒç®¡ç†ç³»çµ±** | 3003 | http://localhost:3003 | å³æ™‚æ—¥èªŒç›£æ§ Dashboard         |

### å¾Œç«¯ API æœå‹™

| æœå‹™åç¨±               | ç«¯å£ | URL                   | èªªæ˜                      |
| ---------------------- | ---- | --------------------- | ------------------------- |
| **æ—¥èªŒç®¡ç† API**       | 5001 | http://localhost:5001 | æ—¥èªŒæ”¶é›†èˆ‡ Socket.IO æœå‹™ |
| **Firebase Functions** | 5000 | http://localhost:5000 | Firebase æœ¬åœ°æ¨¡æ“¬å™¨       |

### é–‹ç™¼å·¥å…·

| å·¥å…·              | ç«¯å£  | URL                    | èªªæ˜                    |
| ----------------- | ----- | ---------------------- | ----------------------- |
| **Metro Bundler** | 8081  | http://localhost:8081  | React Native æ‰“åŒ…æœå‹™å™¨ |
| **Expo DevTools** | 19002 | http://localhost:19002 | Expo é–‹ç™¼å·¥å…·           |

## ğŸ”„ æœå‹™å•Ÿå‹•é †åº

### 1. åŸºç¤æœå‹™

```bash
# Firebase æœ¬åœ°æ¨¡æ“¬å™¨ (å¦‚æœéœ€è¦)
firebase emulators:start
```

### 2. æ—¥èªŒç®¡ç†ç³»çµ±

```bash
cd localite-logs-dashboard
npm start  # å¾Œç«¯: 5001, å‰ç«¯: 3003
```

### 3. ç®¡ç†å“¡ç³»çµ±

```bash
cd localite-admin-dashboard
npm start  # å‰ç«¯: 3001
```

### 4. å•†å®¶ç³»çµ±

```bash
cd localite-merchant-portal
npm start  # å‰ç«¯: 3002
```

### 5. ä¸»æ‡‰ç”¨ç¨‹å¼

```bash
cd localite-app-stable
npm start  # æˆ– expo start
```

## ğŸŒ ç³»çµ±é–“é€šä¿¡

```mermaid
graph TB
    A[ä¸»æ‡‰ç”¨ç¨‹å¼<br/>:8081] --> B[æ—¥èªŒç®¡ç† API<br/>:5001]
    C[ç®¡ç†å“¡ç³»çµ±<br/>:3001] --> B
    D[å•†å®¶ç³»çµ±<br/>:3002] --> B
    E[æ—¥èªŒ Dashboard<br/>:3003] --> B

    B --> F[(Winston æ—¥èªŒæ–‡ä»¶)]
    B --> G[Socket.IO å³æ™‚æ¨é€]

    style A fill:#e1f5fe
    style C fill:#f3e5f5
    style D fill:#e8f5e8
    style E fill:#fff3e0
    style B fill:#ffebee
```

## ğŸ“‹ CORS é…ç½®

æ—¥èªŒç®¡ç†ç³»çµ±çš„ CORS è¨­å®šå·²åŒ…å«æ‰€æœ‰ç›¸é—œç«¯å£ï¼š

```javascript
cors: {
  origin: [
    "http://localhost:3000",  // å‚™ç”¨å‰ç«¯
    "http://localhost:3001",  // ç®¡ç†å“¡ç³»çµ±
    "http://localhost:3002",  // å•†å®¶ç³»çµ±
    "http://localhost:3003"   // æ—¥èªŒ Dashboard
  ],
  methods: ["GET", "POST"],
  credentials: true
}
```

## ğŸ”§ æ•…éšœæ’é™¤

### ç«¯å£è¡çªæª¢æŸ¥

```bash
# æª¢æŸ¥ç‰¹å®šç«¯å£ä½¿ç”¨æƒ…æ³
lsof -i :3001  # ç®¡ç†å“¡ç³»çµ±
lsof -i :3002  # å•†å®¶ç³»çµ±
lsof -i :3003  # æ—¥èªŒç³»çµ±
lsof -i :5001  # æ—¥èªŒ API

# çµ‚æ­¢ä½”ç”¨ç«¯å£çš„é€²ç¨‹
kill -9 <PID>
```

### å¿«é€Ÿé©—è­‰æ‰€æœ‰æœå‹™

```bash
# æª¢æŸ¥æ‰€æœ‰æœå‹™æ˜¯å¦æ­£å¸¸é‹è¡Œ
curl -s http://localhost:3001 > /dev/null && echo "âœ… ç®¡ç†å“¡ç³»çµ±æ­£å¸¸" || echo "âŒ ç®¡ç†å“¡ç³»çµ±ç•°å¸¸"
curl -s http://localhost:3002 > /dev/null && echo "âœ… å•†å®¶ç³»çµ±æ­£å¸¸" || echo "âŒ å•†å®¶ç³»çµ±ç•°å¸¸"
curl -s http://localhost:3003 > /dev/null && echo "âœ… æ—¥èªŒç³»çµ±æ­£å¸¸" || echo "âŒ æ—¥èªŒç³»çµ±ç•°å¸¸"
curl -s http://localhost:5001/api/health > /dev/null && echo "âœ… æ—¥èªŒ API æ­£å¸¸" || echo "âŒ æ—¥èªŒ API ç•°å¸¸"
```

## ğŸ“ æ³¨æ„äº‹é …

1. **ç«¯å£ 3001**: å°ˆé–€çµ¦ç®¡ç†å“¡ç³»çµ±ä½¿ç”¨ï¼Œä¸è¦ä½”ç”¨
2. **ç«¯å£ 3002**: å°ˆé–€çµ¦å•†å®¶ç³»çµ±ä½¿ç”¨ï¼Œä¸è¦ä½”ç”¨
3. **ç«¯å£ 3003**: æ–°åˆ†é…çµ¦æ—¥èªŒç®¡ç†ç³»çµ±ä½¿ç”¨
4. **ç«¯å£ 5001**: æ—¥èªŒç®¡ç† API æœå‹™å™¨
5. **ç«¯å£ 8081**: React Native Metro æ‰“åŒ…æœå‹™å™¨

ç¢ºä¿å•Ÿå‹•æœå‹™æ™‚ä¸æœƒç”¢ç”Ÿç«¯å£è¡çªï¼Œå»ºè­°æŒ‰ç…§ä¸Šè¿°é †åºä¾æ¬¡å•Ÿå‹•æœå‹™ã€‚
