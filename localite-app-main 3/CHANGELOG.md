# 更新日誌

所有 Localite 專案的重要更改都會記錄在此檔案中。

格式基於 [Keep a Changelog](https://keepachangelog.com/zh-TW/1.0.0/)，
並且此專案遵循 [語意化版本](https://semver.org/lang/zh-TW/)。

## [1.0.2] - 2025-01-27

### 改進
- **通知系統優化**：改進通知紅點的定位，現在會出現在文字最後一個字的右上角
- **隱私權政策通知**：新增隱私權政策更新通知功能
- **佈局一致性**：統一所有選單項目的佈局結構，確保右箭頭正確對齊
- **通知狀態管理**：擴展 UpdateContext 支援隱私權政策通知狀態

### 修正
- **紅點位置**：修正通知紅點位置，避免覆蓋文字內容
- **選單對齊**：修正「Localite 官網」選項的右箭頭對齊問題
- **視覺一致性**：確保所有通知紅點使用相同的視覺樣式

## [1.0.1] - 2025-09-10

### 新增
- **徽章系統元件**：新增 BadgeChatBubble、BadgeMessage、BadgeModal 元件
- **徽章詳情頁面**：新增 BadgeDetailScreen 和 BadgeTypeScreen 頁面
- **旅程生成頁面**：新增 JourneyGenScreen 用於生成導覽遊記
- **預覽徽章頁面**：新增 PreviewBadgeScreen 用於徽章預覽
- **Context 系統**：新增 UpdateContext 和 JourneyContext 用於狀態管理
- **徽章資料系統**：新增完整的徽章資料結構和圖片資源
- **通知系統文檔**：新增 NOTIFICATION_DOTS_README.md 說明文件
- **大量圖示資源**：新增天氣、編輯、分享等額外圖示
- **導覽員圖片**：新增 babyron 導覽員圖片和場景圖片
- **徽章圖片資源**：新增 b2-1 到 b7-1 系列徽章圖片（共 28 張）

### 變更
- **CHANGELOG.md 重構**：根據 GitHub 記錄重新組織版本歷史
- **專案文檔更新**：完善專案說明和元件使用指南
- **頁面功能優化**：更新現有頁面的功能和樣式
- **資源管理**：整理和優化圖片資源結構

### 修復
- **版本歷史準確性**：修正版本號和日期以符合實際提交記錄
- **文檔一致性**：確保所有文檔與實際代碼狀態一致

## [1.0.0] - 2025-09-03

### 新增
- **完整導航系統**：新增 DrawerNavigation 抽屜導航，支援多層級頁面導航
- **用戶認證系統**：新增登入/註冊頁面 (Login.tsx, Signup.tsx)
- **個人資料管理**：新增 ProfileScreen 個人資料頁面，支援帳號管理功能
- **登入驗證模態框**：新增 LoginValidationModal 元件，包含登入提示和訪客模式選項
- **旅程驗證模態框**：新增 JourneyValidationModal 元件，用於旅程記錄前的登入驗證
- **聊天結束頁面**：新增 ChatEndScreen，提供旅程結束後的選項和記錄功能
- **旅程主頁面**：新增 JourneyMainScreen，展示用戶的旅程記錄
- **學習單列表頁面**：新增 LearningSheetsListScreen，管理所有學習單
- **徽章系統頁面**：新增 BadgeScreen，展示用戶成就徽章
- **關於頁面**：新增 AboutLocalite 頁面，包含新聞和隱私政策連結
- **新聞頁面**：新增 news.tsx 頁面
- **隱私政策頁面**：新增 privacy.tsx 頁面
- **地圖位置頁面**：新增 MapLocationScreen，支援從聊天頁面選擇新地點
- **新增淡水景點**：
  - 忠寮李舉人宅 (p03)：位於忠寮社區的古厝建築
  - 忠寮竹圍仔十號宅 (p04)：李家大房次子李懋恩所建的古宅
- **導覽員編號系統**：為每個導覽員添加唯一編號 (g01-g04)
- **地點編號系統**：為每個地點添加唯一編號 (p01-p04)
- **導覽員限定地點**：支援導覽員在特定地點出現的設定
- **推薦導覽員功能**：地點可指定推薦的導覽員
- **戶外景點標記**：支援標記戶外景點類型
- **SafeAreaProvider**：整合 react-native-safe-area-context 支援安全區域
- **通知小圓點系統**：新增 UpdateContext 管理徽章和消息更新通知
- **相機功能整合**：在聊天頁面整合相機拍照和相簿選擇功能
- **QR Code 掃描器**：新增 QRCodeScannerScreen 頁面（UI 完成，功能待實作）
- **徽章聊天氣泡**：新增 BadgeChatBubble 和 BadgeMessage 元件
- **徽章類型頁面**：新增 BadgeTypeScreen 和 BadgeDetailScreen
- **旅程生成頁面**：新增 JourneyGenScreen 用於生成導覽遊記
- **大量圖示資源**：新增 60+ 個 UI 圖示和導覽員圖片
- **場景圖片**：新增導覽員告別和互動場景圖片

### 變更
- **App.tsx 重構**：完全重構主應用程式，實現完整的頁面導航系統
- **導航狀態管理**：新增 navigationHistory 狀態，實現智能返回功能
- **用戶登入狀態**：新增 isLoggedIn 狀態管理，支援登入/登出流程
- **聊天流程優化**：整合登入驗證和旅程記錄功能
- **地點資料結構更新**：新增 id_no、recommendedGuide、outdoor 等欄位
- **導覽員資料結構更新**：新增 id_no、limitedPlaces 等欄位
- **移除茶農阿伯導覽員**：從導覽員清單中移除 tea-abe 導覽員
- **座標精度提升**：更新新芳春茶行和霞海城隍廟的座標精度
- **頁面導航優化**：實現統一的頁面導航和返回機制
- **狀態重置機制**：在選擇新地點或導覽員時自動重置相關狀態
- **依賴套件更新**：
  - expo: 53.0.22
  - expo-barcode-scanner: ^13.0.1
  - expo-camera: ~16.1.11
  - expo-image-picker: ^16.1.4
  - react: 19.0.0
  - react-native: 0.79.5
  - react-native-safe-area-context: 5.4.0
- **相機權限設定**：在 app.json 中完善 iOS 和 Android 相機權限配置
- **QR Code 掃描器配置**：新增 expo-barcode-scanner 插件配置

### 修復
- **導航歷史管理**：修復抽屜導航頁面的返回邏輯問題
- **狀態同步問題**：修復聊天頁面與登入狀態的同步問題
- **頁面轉換流程**：修復多層級頁面導航的狀態管理問題
- **徽章資料結構**：修復 badges.ts 中的語法錯誤
- **相機權限處理**：改善相機和相簿權限請求流程

## [0.1.1] - 2025-07-21

### 新增
- **RouteCard 元件**：可重複使用的路線卡片元件，支援 props 傳入不同內容
- **MiniCard 元件**：可重複使用的小型卡片元件，支援圖示和標題
- **ButtonOption 元件**：可重複使用的選項按鈕元件
- **ButtonCamera 元件**：帶有相機圖示的按鈕元件
- **ExhibitCard 元件**：展覽卡片元件，去除學習單內容，尺寸為 W180 x H230
- **預覽頁面**：為每個新元件建立專屬預覽頁面
- **聊天介面整合**：將 MiniCard 和 RouteCard 整合到 ChatScreen 中
- **平行 Slide 展示**：實現水平滑動的卡片展示方式
- **聊天氣泡對齊**：調整 AI 導覽員頭像對齊文字第一行
- **學習單標籤樣式**：調整學習單標籤的圓角為 2px
- **元件使用指南**：新增 COMPONENTS_GUIDE.md 文件，包含所有可重複使用元件的詳細清單

### 變更
- 更新 expo 到 53.0.11
- 更新 expo-camera 到 16.1.8
- 更新 expo-linear-gradient 到 14.1.5
- 更新 react-native 到 0.79.3
- **ChatScreen 重構**：加入 MiniCard 和 RouteCard 的觸發邏輯
- **RouteCard 尺寸調整**：從 W280 x H280 調整為 W180 x H280
- **MiniCard 樣式調整**：圖示尺寸調整為 40x40，文字為 14pt Bold
- **聊天流程優化**：實現 AI 導覽員介紹 → MiniCard 選擇 → RouteCard 展示的流程

### 修復
- 修復 ChatScreen 中 TypeScript 類型錯誤
- 修復 RouteCard 水平滾動的樣式問題
- 修復聊天氣泡對齊問題

## [0.1.0] - 2025-06-18

### 新增
- 專案初始化
- 基本專案架構
- 初始文件
- **專案說明書**：新增 PROJECT_DOCUMENTATION.md 文件
- **QR Code 掃描器狀態說明**：更新專案說明書中的 QR Code 掃描器狀態

### 變更
- 更新套件版本

## [1.0.2] - 2025-01-15

### 新增
- **新聞系統重構**：將 news.tsx 重構為 accordion 類型的新聞頁面
- **新聞資料管理**：新增 data/news.ts 檔案，集中管理所有新聞資料
- **新聞圖片資源**：新增 assets/news/ 目錄，包含 n001-n005 新聞專用圖片
- **建立日期系統**：新增 createdAt 欄位，支援按建立日期排序新聞
- **CTA按鈕設計**：統一CTA按鈕樣式，與探索更多地點按鈕保持一致

### 變更
- **新聞頁面功能**：實現 accordion 展開/收合功能，一次只能展開一則新聞
- **新聞排序邏輯**：按照建立日期（createdAt）排序，最新消息顯示在最上面
- **圖片尺寸標準化**：新聞圖片統一使用 270x200 尺寸
- **按鈕樣式統一**：CTA按鈕採用透明背景配白色邊框的設計風格

### 修復
- **圖示檔案問題**：修復缺少的 icon_down.png 圖示檔案
- **資料結構優化**：完善 NewsItem 介面，新增建立日期欄位

## [未發布]

### 待實作功能
- **QR Code 掃描功能**：目前 QRCodeScannerScreen 僅為 UI Mockup，需要實作實際的相機掃描功能
- **問答測驗系統**：學習單中的互動問答功能需要完整實作
- **徽章觸發邏輯**：需要實作徽章獲得條件的檢測和觸發機制
- **推播通知系統**：需要整合推播通知功能
- **列印功能**：需要實作學習單和導覽遊記的列印功能

---

## 如何更新此文件

每次提交新的更改時，請在 [未發布] 區段下添加相應的更改記錄：

### 新增
- 新功能
- 新文件
- 新依賴

### 變更
- 現有功能的改進
- 文件更新
- 依賴更新

### 修復
- 錯誤修復
- 安全更新
- 效能改進

當發布新版本時，將 [未發布] 的內容移動到新的版本區段下。 