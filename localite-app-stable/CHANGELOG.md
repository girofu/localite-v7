# 更新日誌

所有 Localite 專案的重要更改都會記錄在此檔案中。

格式基於 [Keep a Changelog](https://keepachangelog.com/zh-TW/1.0.0/)，
並且此專案遵循 [語意化版本](https://semver.org/lang/zh-TW/)。

## [未發布]

### 新增
- **完整導航系統**：新增 DrawerNavigation 抽屜導航，支援多層級頁面導航
- **用戶認證系統**：新增登入/註冊頁面 (Login.tsx, Signup.tsx)
- **個人資料管理**：新增 ProfileScreen 個人資料頁面，支援帳號管理功能
- **登入驗證模態框**：新增 LoginValidationModal 元件，包含登入提示和訪客模式選項
- **旅程驗證模態框**：新增 JourneyValidationModal 元件，用於旅程記錄前的登入驗證
- **聊天結束頁面**：新增 ChatEndScreen，提供旅程結束後的選項和記錄功能
- **旅程主頁面**：新增 JourneyMainScreen，展示用戶的旅程記錄
- **學習單列表頁面**：新增 LearningSheetsListScreen，管理所有學習單
- **徽章系統頁面**：新增 BadgeScreen，展示用戶成就徽章
- **關於頁面**：新增 AboutLocalite 頁面，包含新聞和隱私政策連結
- **新聞頁面**：新增 news.tsx 頁面
- **隱私政策頁面**：新增 privacy.tsx 頁面
- **地圖位置頁面**：新增 MapLocationScreen，支援從聊天頁面選擇新地點
- **新增淡水景點**：
  - 忠寮李舉人宅 (p03)：位於忠寮社區的古厝建築
  - 忠寮竹圍仔十號宅 (p04)：李家大房次子李懋恩所建的古宅
- **導覽員編號系統**：為每個導覽員添加唯一編號 (g01-g04)
- **地點編號系統**：為每個地點添加唯一編號 (p01-p04)
- **導覽員限定地點**：支援導覽員在特定地點出現的設定
- **推薦導覽員功能**：地點可指定推薦的導覽員
- **戶外景點標記**：支援標記戶外景點類型
- **SafeAreaProvider**：整合 react-native-safe-area-context 支援安全區域

### 變更
- **App.tsx 重構**：完全重構主應用程式，實現完整的頁面導航系統
- **導航狀態管理**：新增 navigationHistory 狀態，實現智能返回功能
- **用戶登入狀態**：新增 isLoggedIn 狀態管理，支援登入/登出流程
- **聊天流程優化**：整合登入驗證和旅程記錄功能
- **地點資料結構更新**：新增 id_no、recommendedGuide、outdoor 等欄位
- **導覽員資料結構更新**：新增 id_no、limitedPlaces 等欄位
- **移除茶農阿伯導覽員**：從導覽員清單中移除 tea-abe 導覽員
- **座標精度提升**：更新新芳春茶行和霞海城隍廟的座標精度
- **頁面導航優化**：實現統一的頁面導航和返回機制
- **狀態重置機制**：在選擇新地點或導覽員時自動重置相關狀態

### 修復
- **導航歷史管理**：修復抽屜導航頁面的返回邏輯問題
- **狀態同步問題**：修復聊天頁面與登入狀態的同步問題
- **頁面轉換流程**：修復多層級頁面導航的狀態管理問題

## [0.1.1] - 2025-07-21

### 新增
- **RouteCard 元件**：可重複使用的路線卡片元件，支援 props 傳入不同內容
- **MiniCard 元件**：可重複使用的小型卡片元件，支援圖示和標題
- **ButtonOption 元件**：可重複使用的選項按鈕元件
- **ButtonCamera 元件**：帶有相機圖示的按鈕元件
- **ExhibitCard 元件**：展覽卡片元件，去除學習單內容，尺寸為 W180 x H230
- **預覽頁面**：為每個新元件建立專屬預覽頁面
- **聊天介面整合**：將 MiniCard 和 RouteCard 整合到 ChatScreen 中
- **平行 Slide 展示**：實現水平滑動的卡片展示方式
- **聊天氣泡對齊**：調整 AI 導覽員頭像對齊文字第一行
- **學習單標籤樣式**：調整學習單標籤的圓角為 2px
- **元件使用指南**：新增 COMPONENTS_GUIDE.md 文件，包含所有可重複使用元件的詳細清單

### 變更
- 更新 expo 到 53.0.11
- 更新 expo-camera 到 16.1.8
- 更新 expo-linear-gradient 到 14.1.5
- 更新 react-native 到 0.79.3
- **ChatScreen 重構**：加入 MiniCard 和 RouteCard 的觸發邏輯
- **RouteCard 尺寸調整**：從 W280 x H280 調整為 W180 x H280
- **MiniCard 樣式調整**：圖示尺寸調整為 40x40，文字為 14pt Bold
- **聊天流程優化**：實現 AI 導覽員介紹 → MiniCard 選擇 → RouteCard 展示的流程

### 修復
- 修復 ChatScreen 中 TypeScript 類型錯誤
- 修復 RouteCard 水平滾動的樣式問題
- 修復聊天氣泡對齊問題

## [0.1.0] - 2024-03-21

### 新增
- 專案初始化
- 基本專案架構
- 初始文件

---

## 如何更新此文件

每次提交新的更改時，請在 [未發布] 區段下添加相應的更改記錄：

### 新增
- 新功能
- 新文件
- 新依賴

### 變更
- 現有功能的改進
- 文件更新
- 依賴更新

### 修復
- 錯誤修復
- 安全更新
- 效能改進

當發布新版本時，將 [未發布] 的內容移動到新的版本區段下。 