# Localite æ—¥èªŒç®¡ç†ç³»çµ±å®‰è£æŒ‡å—

## ğŸ‰ å•é¡Œè§£æ±ºç¸½çµ

**åŸå•é¡Œ**: è¨»å†Šå¸³è™Ÿæ™‚é»æ“Šè¨»å†ŠæŒ‰éˆ•æ²’æœ‰åæ‡‰ï¼Œä¸¦ä¸”ç¼ºä¹é‹è¡Œæ—¥èªŒä¾†æ’æŸ¥å•é¡Œã€‚

**æ ¹æœ¬åŸå› **: `localite-app-stable/app/index.tsx` ç¬¬ 7 è¡Œå’Œç¬¬ 307 è¡Œä½¿ç”¨äº†éŒ¯èª¤çš„è¨»å†Šè¢å¹•å…ƒä»¶ `SignupScreen`ï¼Œæ‡‰è©²ä½¿ç”¨ `RegisterScreen`ã€‚

**è§£æ±ºæ–¹æ¡ˆ**:

1. âœ… å»ºç«‹äº†ç¨ç«‹çš„æ—¥èªŒç®¡ç† Web ä»‹é¢
2. âœ… ä¿®å¾©äº†è¨»å†ŠåŠŸèƒ½çš„å…ƒä»¶å¼•ç”¨å•é¡Œ
3. âœ… æ•´åˆäº†æ‡‰ç”¨ç¨‹å¼æ—¥èªŒåˆ° Web ä»‹é¢

## ğŸš€ ç³»çµ±æ¶æ§‹

### æ—¥èªŒç®¡ç†ç³»çµ± (`localite-logs-dashboard/`)

```
localite-logs-dashboard/
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ server.js          # Express + Socket.IO æœå‹™å™¨ (ç«¯å£: 5001)
â”‚   â””â”€â”€ logs/              # Winston æ—¥èªŒæ–‡ä»¶å­˜å„²
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.js            # React Dashboard ä¸»ä»‹é¢
â”‚   â”œâ”€â”€ App.css           # ç¾ä»£åŒ– UI æ¨£å¼
â”‚   â””â”€â”€ index.js          # React å…¥å£é»
â””â”€â”€ public/
    â””â”€â”€ index.html        # HTML æ¨¡æ¿
```

### æ‡‰ç”¨ç¨‹å¼æ•´åˆ

- æ–°å¢ `LoggingService.ts`: çµ±ä¸€çš„æ—¥èªŒæœå‹™
- æ•´åˆè‡³ `AuthContext.tsx`: èªè­‰äº‹ä»¶æ—¥èªŒ
- æ•´åˆè‡³ `RegisterScreen.tsx`: è¨»å†Šæµç¨‹æ—¥èªŒ
- æ•´åˆè‡³ `app/index.tsx`: æ‡‰ç”¨ç¨‹å¼ç”Ÿå‘½é€±æœŸæ—¥èªŒ

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### 1. å•Ÿå‹•æ—¥èªŒç®¡ç†ç³»çµ±

```bash
cd /Users/fuchangwei/Projects/localite-v7/localite-logs-dashboard
npm start
```

é€™æœƒåŒæ™‚å•Ÿå‹•ï¼š

- **å¾Œç«¯æœå‹™å™¨**: http://localhost:5001 (API + Socket.IO)
- **å‰ç«¯ Dashboard**: http://localhost:3003 (React ä»‹é¢)

### 2. è¨ªå•æ—¥èªŒ Dashboard

æ‰“é–‹ç€è¦½å™¨è¨ªå•: http://localhost:3003

Dashboard åŠŸèƒ½ï¼š

- ğŸ”´ **å³æ™‚æ—¥èªŒæµ**: ä½¿ç”¨ Socket.IO å³æ™‚æ¨é€
- ğŸ” **æ™ºèƒ½éæ¿¾**: æŒ‰ç´šåˆ¥(éŒ¯èª¤/è­¦å‘Š/è³‡è¨Š)ã€æœå‹™ã€é—œéµå­—æœç´¢
- ğŸ“Š **çµ±è¨ˆæ•¸æ“š**: å¯¦æ™‚é¡¯ç¤ºå„é¡æ—¥èªŒæ•¸é‡
- ğŸ¨ **æš—è‰²ä¸»é¡Œ**: è­·çœ¼çš„ç¾ä»£åŒ–ä»‹é¢
- ğŸ“ **æŒä¹…åŒ–**: Winston è‡ªå‹•å­˜å„²åˆ°æ–‡ä»¶

### 3. æ¸¬è©¦è¨»å†ŠåŠŸèƒ½

1. å•Ÿå‹• Localite æ‡‰ç”¨ç¨‹å¼:

```bash
cd localite-app-stable
npm start
# æˆ–
expo start
```

2. å°èˆªè‡³è¨»å†Šé é¢
3. å¡«å¯«è¨»å†Šè³‡è¨Šä¸¦é»æ“Šè¨»å†Š
4. åœ¨æ—¥èªŒ Dashboard ä¸­è§€å¯Ÿï¼š
   - ğŸŸ¢ ç”¨æˆ¶æ“ä½œæ—¥èªŒ
   - ğŸŸ¡ è¡¨å–®é©—è­‰æ—¥èªŒ
   - ğŸ”´ éŒ¯èª¤æ—¥èªŒ (å¦‚æœ‰)
   - âœ… æˆåŠŸè¨»å†Šæ—¥èªŒ

## ğŸ“‹ ä¿®å¾©çš„å…·é«”å•é¡Œ

### åŸå§‹å•é¡Œä»£ç¢¼:

```tsx
// app/index.tsx (ç¬¬7è¡Œ)
import SignupScreen from '../screens/Signup';

// app/index.tsx (ç¬¬307è¡Œ)
case 'signup':
  return <SignupScreen onClose={goBack} onNavigateToLogin={() => navigateToScreen('login')} />;
```

### ä¿®å¾©å¾Œä»£ç¢¼:

```tsx
// app/index.tsx (ç¬¬7è¡Œ)
import RegisterScreen from '../src/screens/auth/RegisterScreen';

// app/index.tsx (ç¬¬307è¡Œ)
case 'signup':
  return <RegisterScreen navigation={{ navigate: navigateToScreen, goBack }} />;
```

## ğŸ” æ—¥èªŒé¡å‹èˆ‡ç´šåˆ¥

### æ—¥èªŒç´šåˆ¥

- **ERROR** ğŸ”´: éŒ¯èª¤æ—¥èªŒï¼Œéœ€è¦ç«‹å³é—œæ³¨
- **WARN** ğŸŸ¡: è­¦å‘Šæ—¥èªŒï¼Œå¯èƒ½å½±éŸ¿åŠŸèƒ½
- **INFO** ğŸŸ¢: è³‡è¨Šæ—¥èªŒï¼Œæ­£å¸¸é‹è¡Œç‹€æ…‹
- **DEBUG** ğŸ”µ: èª¿è©¦æ—¥èªŒï¼Œé–‹ç™¼éšæ®µä½¿ç”¨

### æ—¥èªŒæœå‹™åˆ†é¡

- **localite-app**: ä¸»æ‡‰ç”¨ç¨‹å¼
- **auth-service**: èªè­‰ç›¸é—œ
- **logs-dashboard**: æ—¥èªŒç³»çµ±æœ¬èº«
- **test-dashboard**: æ¸¬è©¦æ—¥èªŒ

## ğŸ›  API ä½¿ç”¨ç¯„ä¾‹

### æ¨é€è‡ªå®šç¾©æ—¥èªŒ

```bash
curl -X POST http://localhost:5001/api/logs \
  -H "Content-Type: application/json" \
  -d '{
    "level": "error",
    "message": "è¨»å†ŠåŠŸèƒ½æ¸¬è©¦å¤±æ•—",
    "service": "localite-app",
    "metadata": {
      "userId": "test123",
      "screen": "RegisterScreen",
      "action": "button_click"
    }
  }'
```

### æŸ¥è©¢æ—¥èªŒ

```bash
# ç²å–æœ€è¿‘éŒ¯èª¤æ—¥èªŒ
curl "http://localhost:5001/api/logs?level=error&limit=50"

# ç²å–èªè­‰ç›¸é—œæ—¥èªŒ
curl "http://localhost:5001/api/logs?service=auth-service&limit=100"
```

### ç³»çµ±å¥åº·æª¢æŸ¥

```bash
curl http://localhost:5001/api/health
```

## ğŸ¯ é—œéµåŠŸèƒ½é©—è­‰

### 1. è¨»å†ŠåŠŸèƒ½ä¿®å¾©é©—è­‰

- âœ… é»æ“Šè¨»å†ŠæŒ‰éˆ•æœ‰åæ‡‰
- âœ… ä½¿ç”¨æ­£ç¢ºçš„ RegisterScreen å…ƒä»¶
- âœ… è¡¨å–®é©—è­‰æ­£å¸¸å·¥ä½œ
- âœ… éŒ¯èª¤è¨Šæ¯æ­£ç¢ºé¡¯ç¤º
- âœ… æˆåŠŸè¨»å†Šæµç¨‹å®Œæ•´

### 2. æ—¥èªŒç³»çµ±é©—è­‰

- âœ… å³æ™‚æ—¥èªŒæ¨é€æ­£å¸¸
- âœ… éæ¿¾å’Œæœç´¢åŠŸèƒ½å¯ç”¨
- âœ… çµ±è¨ˆæ•¸æ“šæº–ç¢ºé¡¯ç¤º
- âœ… æ—¥èªŒæŒä¹…åŒ–åˆ°æ–‡ä»¶
- âœ… API æ¥å£å›æ‡‰æ­£å¸¸

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

**1. å‰ç«¯ç„¡æ³•é€£æ¥å¾Œç«¯**

```bash
# æª¢æŸ¥å¾Œç«¯æ˜¯å¦é‹è¡Œ
curl http://localhost:5001/api/health

# æª¢æŸ¥ CORS è¨­å®š
# ç¢ºèª server/server.js ä¸­çš„ CORS origin åŒ…å«å‰ç«¯åœ°å€
```

**2. æ—¥èªŒæ²’æœ‰é¡¯ç¤º**

```bash
# æª¢æŸ¥ LoggingService é…ç½®
# ç¢ºèª remoteUrl æŒ‡å‘æ­£ç¢ºçš„å¾Œç«¯åœ°å€

# æª¢æŸ¥ç¶²è·¯é€£æ¥
telnet localhost 5001
```

**3. è¨»å†ŠåŠŸèƒ½ä»ç„¶æ²’åæ‡‰**

```bash
# æª¢æŸ¥ app/index.tsx çš„å°å…¥
grep -n "RegisterScreen" localite-app-stable/app/index.tsx

# æª¢æŸ¥çµ„ä»¶è·¯å¾‘
ls -la localite-app-stable/src/screens/auth/RegisterScreen.tsx
```

## ğŸ“ æ—¥èªŒæ–‡ä»¶ä½ç½®

ç³»çµ±è‡ªå‹•å°‡æ—¥èªŒå­˜å„²åˆ°ä»¥ä¸‹ä½ç½®ï¼š

```
localite-logs-dashboard/server/logs/
â”œâ”€â”€ error.log      # åªåŒ…å«éŒ¯èª¤æ—¥èªŒ
â”œâ”€â”€ combined.log   # åŒ…å«æ‰€æœ‰ç´šåˆ¥æ—¥èªŒ
```

## ğŸ‰ ç¸½çµ

é€™å€‹æ—¥èªŒç®¡ç†ç³»çµ±ä¸åƒ…è§£æ±ºäº†åŸå§‹çš„è¨»å†ŠæŒ‰éˆ•ç„¡åæ‡‰å•é¡Œï¼Œé‚„ç‚ºæ•´å€‹ Localite æ‡‰ç”¨ç¨‹å¼å»ºç«‹äº†å®Œæ•´çš„æ—¥èªŒç›£æ§åŸºç¤è¨­æ–½ã€‚ç¾åœ¨ä½ å¯ä»¥ï¼š

1. **å¯¦æ™‚ç›£æ§**: é€šé Web ä»‹é¢å³æ™‚æŸ¥çœ‹æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹
2. **å•é¡Œæ’æŸ¥**: å¿«é€Ÿå®šä½å’Œè¨ºæ–·åŠŸèƒ½å•é¡Œ
3. **ç”¨æˆ¶è¡Œç‚º**: è¿½è¹¤ç”¨æˆ¶æ“ä½œå’Œèªè­‰äº‹ä»¶
4. **æ€§èƒ½ç›£æ§**: ç›£æ§æ‡‰ç”¨ç¨‹å¼æ€§èƒ½æŒ‡æ¨™
5. **æ­·å²è¿½è¹¤**: æŒä¹…åŒ–å­˜å„²æ‰€æœ‰æ—¥èªŒè¨˜éŒ„

ç³»çµ±æ¡ç”¨ç¾ä»£åŒ–æŠ€è¡“æ£§ï¼ˆReact + Socket.IO + Winstonï¼‰ï¼Œå…·æœ‰è‰¯å¥½çš„æ“´å±•æ€§å’Œå¯ç¶­è­·æ€§ã€‚
