# åœ¨åœ°äºº AI å°è¦½ç³»çµ± - 30 å¤©é–‹ç™¼æª¢æŸ¥æ¸…å–®

## ğŸš€ å¿«é€Ÿå•Ÿå‹• (Day 1)

### ç’°å¢ƒç¢ºèª

```bash
# æª¢æŸ¥ Node.js ç‰ˆæœ¬
node --version  # éœ€è¦ >= 18.0.0
npm --version   # éœ€è¦ >= 9.0.0

# æª¢æŸ¥ Expo CLI
npx expo --version

# æª¢æŸ¥ Git è¨­ç½®
git --version
```

### å°ˆæ¡ˆåˆå§‹åŒ–

```bash
cd /Users/fuchangwei/Projects/localite-v7

# å®‰è£ä¾è³´
npm install

# ç¢ºèªå°ˆæ¡ˆå¯é‹è¡Œ
npm start
```

## Week 1: åŸºç¤å»ºè¨­ (Day 1-7)

### âœ… Day 1-2: Firebase è¨­ç½®

#### 1. Firebase å°ˆæ¡ˆå»ºç«‹

- [ ] å‰å¾€ [Firebase Console](https://console.firebase.google.com/)
- [ ] å»ºç«‹æ–°å°ˆæ¡ˆ "localite-ai-tour"
- [ ] å•Ÿç”¨ä»¥ä¸‹æœå‹™ï¼š
  - [ ] Authentication (Email/Password + Google)
  - [ ] Firestore Database
  - [ ] Storage
  - [ ] Functions (å¯é¸)

#### 2. Firebase è¨­å®šæª”ä¸‹è¼‰

```bash
# å®‰è£ Firebase CLI
npm install -g firebase-tools

# ç™»å…¥ Firebase
firebase login

# åˆå§‹åŒ– Firebase å°ˆæ¡ˆ
firebase init
```

#### 3. React Native Firebase æ•´åˆ

```bash
# å®‰è£ Firebase SDK
npm install firebase

# å®‰è£ Expo Firebase å¥—ä»¶
npx expo install @react-native-firebase/app
```

#### 4. Firebase é…ç½®æª”å»ºç«‹

```typescript
// src/config/firebase.ts
import { initializeApp } from "firebase/app";
import { getAuth } from "firebase/auth";
import { getFirestore } from "firebase/firestore";
import { getStorage } from "firebase/storage";

const firebaseConfig = {
  // å¾ Firebase Console è¤‡è£½è¨­å®š
  apiKey: "your-api-key",
  authDomain: "your-auth-domain",
  projectId: "your-project-id",
  storageBucket: "your-storage-bucket",
  messagingSenderId: "your-sender-id",
  appId: "your-app-id",
};

const app = initializeApp(firebaseConfig);

export const auth = getAuth(app);
export const db = getFirestore(app);
export const storage = getStorage(app);
```

### âœ… Day 3-4: AI æœå‹™æ•´åˆ

#### 1. Google AI Studio API ç”³è«‹

- [ ] å‰å¾€ [Google AI Studio](https://makersuite.google.com/app/apikey)
- [ ] ç”³è«‹ API Key
- [ ] æ¸¬è©¦ API é€£æ¥

#### 2. AI æœå‹™å°è£

```typescript
// src/services/aiService.ts
export class AIService {
  private readonly apiKey: string;
  private readonly endpoint =
    "https://generativelanguage.googleapis.com/v1/models/gemini-pro:generateContent";

  constructor(apiKey: string) {
    this.apiKey = apiKey;
  }

  async generateResponse(prompt: string): Promise<string> {
    try {
      const response = await fetch(`${this.endpoint}?key=${this.apiKey}`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          contents: [
            {
              parts: [
                {
                  text: prompt,
                },
              ],
            },
          ],
        }),
      });

      const data = await response.json();
      return (
        data.candidates[0]?.content?.parts[0]?.text ||
        "æŠ±æ­‰ï¼Œæˆ‘ç¾åœ¨ç„¡æ³•å›ç­”é€™å€‹å•é¡Œã€‚"
      );
    } catch (error) {
      console.error("AI API éŒ¯èª¤:", error);
      return "ç³»çµ±æš«æ™‚ç„¡æ³•å›æ‡‰ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚";
    }
  }
}
```

#### 3. Google TTS æ•´åˆ

```bash
# å®‰è£èªéŸ³å¥—ä»¶
npx expo install expo-speech
```

```typescript
// src/services/ttsService.ts
import * as Speech from "expo-speech";

export class TTSService {
  static async speak(text: string, language: string = "zh-TW"): Promise<void> {
    try {
      await Speech.speak(text, {
        language,
        pitch: 1.0,
        rate: 0.8,
      });
    } catch (error) {
      console.error("èªéŸ³æ’­æ”¾éŒ¯èª¤:", error);
    }
  }

  static stop(): void {
    Speech.stop();
  }
}
```

### âœ… Day 5-7: Mobile App åŸºç¤

#### 1. èªè­‰é é¢å»ºç«‹

```typescript
// src/screens/LoginScreen.tsx
import React, { useState } from "react";
import { View, TextInput, Button, Alert } from "react-native";
import {
  signInWithEmailAndPassword,
  createUserWithEmailAndPassword,
} from "firebase/auth";
import { auth } from "../config/firebase";

export const LoginScreen: React.FC = () => {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");

  const handleLogin = async () => {
    try {
      await signInWithEmailAndPassword(auth, email, password);
      // ç™»å…¥æˆåŠŸï¼Œå°èˆªåˆ°ä¸»é é¢
    } catch (error) {
      Alert.alert("ç™»å…¥å¤±æ•—", error.message);
    }
  };

  const handleRegister = async () => {
    try {
      await createUserWithEmailAndPassword(auth, email, password);
      // è¨»å†ŠæˆåŠŸ
    } catch (error) {
      Alert.alert("è¨»å†Šå¤±æ•—", error.message);
    }
  };

  return (
    <View>
      <TextInput
        placeholder="Email"
        value={email}
        onChangeText={setEmail}
        autoCapitalize="none"
      />
      <TextInput
        placeholder="å¯†ç¢¼"
        value={password}
        onChangeText={setPassword}
        secureTextEntry
      />
      <Button title="ç™»å…¥" onPress={handleLogin} />
      <Button title="è¨»å†Š" onPress={handleRegister} />
    </View>
  );
};
```

#### 2. ä¸»è¦å°è¦½ä»‹é¢

```typescript
// src/screens/TourScreen.tsx
import React, { useState } from "react";
import {
  View,
  TextInput,
  TouchableOpacity,
  ScrollView,
  Text,
} from "react-native";
import { AIService } from "../services/aiService";
import { TTSService } from "../services/ttsService";

export const TourScreen: React.FC = () => {
  const [question, setQuestion] = useState("");
  const [messages, setMessages] = useState<
    Array<{ type: "user" | "ai"; text: string }>
  >([]);
  const [loading, setLoading] = useState(false);

  const aiService = new AIService(process.env.GOOGLE_AI_API_KEY!);

  const handleSendQuestion = async () => {
    if (!question.trim()) return;

    const newMessages = [
      ...messages,
      { type: "user" as const, text: question },
    ];
    setMessages(newMessages);
    setLoading(true);

    try {
      const response = await aiService.generateResponse(question);
      setMessages([...newMessages, { type: "ai" as const, text: response }]);

      // è‡ªå‹•æ’­æ”¾èªéŸ³
      await TTSService.speak(response);
    } catch (error) {
      console.error("ç™¼é€å•é¡ŒéŒ¯èª¤:", error);
    } finally {
      setLoading(false);
      setQuestion("");
    }
  };

  return (
    <View style={{ flex: 1, padding: 20 }}>
      <ScrollView style={{ flex: 1 }}>
        {messages.map((message, index) => (
          <View key={index} style={{ marginBottom: 10 }}>
            <Text
              style={{
                alignSelf: message.type === "user" ? "flex-end" : "flex-start",
                backgroundColor:
                  message.type === "user" ? "#007AFF" : "#E5E5EA",
                color: message.type === "user" ? "white" : "black",
                padding: 10,
                borderRadius: 10,
                maxWidth: "80%",
              }}
            >
              {message.text}
            </Text>
          </View>
        ))}
      </ScrollView>

      <View style={{ flexDirection: "row", alignItems: "center" }}>
        <TextInput
          style={{
            flex: 1,
            borderWidth: 1,
            borderColor: "#ddd",
            padding: 10,
            marginRight: 10,
            borderRadius: 5,
          }}
          placeholder="è«‹å•é—œæ–¼é€™å€‹æ™¯é»çš„å•é¡Œ..."
          value={question}
          onChangeText={setQuestion}
          multiline
        />
        <TouchableOpacity
          onPress={handleSendQuestion}
          disabled={loading}
          style={{
            backgroundColor: loading ? "#ccc" : "#007AFF",
            padding: 10,
            borderRadius: 5,
          }}
        >
          <Text style={{ color: "white" }}>
            {loading ? "æ€è€ƒä¸­..." : "ç™¼é€"}
          </Text>
        </TouchableOpacity>
      </View>
    </View>
  );
};
```

#### 3. ç…§ç‰‡ä¸Šå‚³åŠŸèƒ½

```bash
# å®‰è£ç›¸æ©Ÿå’Œåœ–ç‰‡é¸æ“‡å™¨
npx expo install expo-image-picker expo-camera
```

```typescript
// src/components/PhotoUpload.tsx
import React from "react";
import { View, TouchableOpacity, Text, Alert } from "react-native";
import * as ImagePicker from "expo-image-picker";
import { ref, uploadBytes, getDownloadURL } from "firebase/storage";
import { storage } from "../config/firebase";

export const PhotoUpload: React.FC<{
  onPhotoUploaded: (imageUrl: string) => void;
}> = ({ onPhotoUploaded }) => {
  const pickImage = async () => {
    const permissionResult =
      await ImagePicker.requestMediaLibraryPermissionsAsync();

    if (!permissionResult.granted) {
      Alert.alert("éœ€è¦ç›¸ç°¿æ¬Šé™", "è«‹å…è¨±å­˜å–ç›¸ç°¿ä»¥ä¸Šå‚³ç…§ç‰‡");
      return;
    }

    const result = await ImagePicker.launchImageLibraryAsync({
      mediaTypes: ImagePicker.MediaTypeOptions.Images,
      allowsEditing: true,
      aspect: [4, 3],
      quality: 0.7,
    });

    if (!result.canceled) {
      uploadImage(result.assets[0].uri);
    }
  };

  const takePhoto = async () => {
    const permissionResult = await ImagePicker.requestCameraPermissionsAsync();

    if (!permissionResult.granted) {
      Alert.alert("éœ€è¦ç›¸æ©Ÿæ¬Šé™", "è«‹å…è¨±ä½¿ç”¨ç›¸æ©Ÿä»¥æ‹æ”ç…§ç‰‡");
      return;
    }

    const result = await ImagePicker.launchCameraAsync({
      allowsEditing: true,
      aspect: [4, 3],
      quality: 0.7,
    });

    if (!result.canceled) {
      uploadImage(result.assets[0].uri);
    }
  };

  const uploadImage = async (uri: string) => {
    try {
      const response = await fetch(uri);
      const blob = await response.blob();

      const imageRef = ref(storage, `tour-images/${Date.now()}.jpg`);
      await uploadBytes(imageRef, blob);

      const downloadURL = await getDownloadURL(imageRef);
      onPhotoUploaded(downloadURL);

      Alert.alert("ä¸Šå‚³æˆåŠŸ", "ç…§ç‰‡å·²ä¸Šå‚³ï¼Œå¯ä»¥é–‹å§‹è©¢å•ç›¸é—œå•é¡Œï¼");
    } catch (error) {
      console.error("ä¸Šå‚³ç…§ç‰‡éŒ¯èª¤:", error);
      Alert.alert("ä¸Šå‚³å¤±æ•—", "ç…§ç‰‡ä¸Šå‚³æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦");
    }
  };

  return (
    <View
      style={{
        flexDirection: "row",
        justifyContent: "space-around",
        padding: 20,
      }}
    >
      <TouchableOpacity
        onPress={takePhoto}
        style={{
          backgroundColor: "#34C759",
          padding: 15,
          borderRadius: 10,
          minWidth: 100,
          alignItems: "center",
        }}
      >
        <Text style={{ color: "white", fontWeight: "bold" }}>æ‹ç…§</Text>
      </TouchableOpacity>

      <TouchableOpacity
        onPress={pickImage}
        style={{
          backgroundColor: "#007AFF",
          padding: 15,
          borderRadius: 10,
          minWidth: 100,
          alignItems: "center",
        }}
      >
        <Text style={{ color: "white", fontWeight: "bold" }}>é¸æ“‡ç…§ç‰‡</Text>
      </TouchableOpacity>
    </View>
  );
};
```

## Week 2: æ ¸å¿ƒåŠŸèƒ½é–‹ç™¼ (Day 8-14)

### âœ… Day 8-10: AI å°è¦½åŠŸèƒ½å®Œå–„

#### 1. ç…§ç‰‡åˆ†ææ•´åˆ

```typescript
// src/services/visionService.ts
export class VisionService {
  private readonly apiKey: string;

  constructor(apiKey: string) {
    this.apiKey = apiKey;
  }

  async analyzeImage(imageUrl: string, question: string): Promise<string> {
    try {
      const response = await fetch(
        `https://generativelanguage.googleapis.com/v1/models/gemini-pro-vision:generateContent?key=${this.apiKey}`,
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            contents: [
              {
                parts: [
                  { text: `è«‹åˆ†æé€™å¼µç…§ç‰‡ä¸¦å›ç­”å•é¡Œï¼š${question}` },
                  {
                    inline_data: {
                      mime_type: "image/jpeg",
                      data: await this.imageToBase64(imageUrl),
                    },
                  },
                ],
              },
            ],
          }),
        }
      );

      const data = await response.json();
      return (
        data.candidates[0]?.content?.parts[0]?.text ||
        "ç„¡æ³•åˆ†ææ­¤ç…§ç‰‡ï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚"
      );
    } catch (error) {
      console.error("åœ–ç‰‡åˆ†æéŒ¯èª¤:", error);
      return "åœ–ç‰‡åˆ†æå¤±æ•—ï¼Œè«‹ç¢ºèªç¶²è·¯é€£æ¥æˆ–ç¨å¾Œå†è©¦ã€‚";
    }
  }

  private async imageToBase64(imageUrl: string): Promise<string> {
    const response = await fetch(imageUrl);
    const blob = await response.blob();
    return new Promise((resolve) => {
      const reader = new FileReader();
      reader.onload = () => {
        const base64 = (reader.result as string).split(",")[1];
        resolve(base64);
      };
      reader.readAsDataURL(blob);
    });
  }
}
```

#### 2. èªéŸ³æ§åˆ¶å„ªåŒ–

```typescript
// src/components/VoiceControl.tsx
import React, { useState } from "react";
import { TouchableOpacity, Text, View } from "react-native";
import { TTSService } from "../services/ttsService";
import * as Speech from "expo-speech";

export const VoiceControl: React.FC<{
  text: string;
  language?: string;
}> = ({ text, language = "zh-TW" }) => {
  const [isPlaying, setIsPlaying] = useState(false);

  const handlePlayPause = async () => {
    if (isPlaying) {
      Speech.stop();
      setIsPlaying(false);
    } else {
      setIsPlaying(true);
      await TTSService.speak(text, language);
      setIsPlaying(false);
    }
  };

  return (
    <TouchableOpacity
      onPress={handlePlayPause}
      style={{
        backgroundColor: isPlaying ? "#FF3B30" : "#34C759",
        padding: 8,
        borderRadius: 5,
        marginLeft: 10,
      }}
    >
      <Text style={{ color: "white", fontSize: 12 }}>
        {isPlaying ? "åœæ­¢" : "æ’­æ”¾"}
      </Text>
    </TouchableOpacity>
  );
};
```

### âœ… Day 11-14: å•†æˆ¶å¾Œå°é–‹ç™¼

#### 1. å•†æˆ¶è¨»å†Šæµç¨‹

```typescript
// src/screens/MerchantRegisterScreen.tsx
import React, { useState } from "react";
import { View, TextInput, Button, Alert, ScrollView } from "react-native";
import { collection, addDoc } from "firebase/firestore";
import { auth, db } from "../config/firebase";

export const MerchantRegisterScreen: React.FC = () => {
  const [businessInfo, setBusinessInfo] = useState({
    name: "",
    description: "",
    address: "",
    phone: "",
    category: "",
  });

  const handleSubmit = async () => {
    try {
      const merchantData = {
        ...businessInfo,
        userId: auth.currentUser?.uid,
        createdAt: new Date().toISOString(),
        status: "pending", // å¾…å¯©æ ¸
      };

      await addDoc(collection(db, "merchants"), merchantData);
      Alert.alert(
        "è¨»å†ŠæˆåŠŸ",
        "æ‚¨çš„å•†æˆ¶è³‡æ–™å·²æäº¤ï¼Œæˆ‘å€‘å°‡åœ¨ 1-3 å€‹å·¥ä½œå¤©å…§å¯©æ ¸ã€‚"
      );
    } catch (error) {
      console.error("å•†æˆ¶è¨»å†ŠéŒ¯èª¤:", error);
      Alert.alert("è¨»å†Šå¤±æ•—", "è«‹æª¢æŸ¥ç¶²è·¯é€£æ¥ä¸¦ç¨å¾Œå†è©¦ã€‚");
    }
  };

  return (
    <ScrollView style={{ flex: 1, padding: 20 }}>
      <TextInput
        placeholder="å•†æˆ¶åç¨±"
        value={businessInfo.name}
        onChangeText={(text) =>
          setBusinessInfo({ ...businessInfo, name: text })
        }
        style={{
          borderWidth: 1,
          borderColor: "#ddd",
          padding: 10,
          marginBottom: 15,
          borderRadius: 5,
        }}
      />
      <TextInput
        placeholder="å•†æˆ¶æè¿°"
        value={businessInfo.description}
        onChangeText={(text) =>
          setBusinessInfo({ ...businessInfo, description: text })
        }
        multiline
        numberOfLines={4}
        style={{
          borderWidth: 1,
          borderColor: "#ddd",
          padding: 10,
          marginBottom: 15,
          borderRadius: 5,
        }}
      />
      <TextInput
        placeholder="åœ°å€"
        value={businessInfo.address}
        onChangeText={(text) =>
          setBusinessInfo({ ...businessInfo, address: text })
        }
        style={{
          borderWidth: 1,
          borderColor: "#ddd",
          padding: 10,
          marginBottom: 15,
          borderRadius: 5,
        }}
      />
      <TextInput
        placeholder="è¯çµ¡é›»è©±"
        value={businessInfo.phone}
        onChangeText={(text) =>
          setBusinessInfo({ ...businessInfo, phone: text })
        }
        keyboardType="phone-pad"
        style={{
          borderWidth: 1,
          borderColor: "#ddd",
          padding: 10,
          marginBottom: 15,
          borderRadius: 5,
        }}
      />
      <TextInput
        placeholder="å•†æˆ¶é¡å‹ (ä¾‹: é¤å»³ã€æ™¯é»ã€å•†åº—)"
        value={businessInfo.category}
        onChangeText={(text) =>
          setBusinessInfo({ ...businessInfo, category: text })
        }
        style={{
          borderWidth: 1,
          borderColor: "#ddd",
          padding: 10,
          marginBottom: 20,
          borderRadius: 5,
        }}
      />
      <Button title="æäº¤è¨»å†Š" onPress={handleSubmit} />
    </ScrollView>
  );
};
```

#### 2. å…§å®¹ç®¡ç†ç³»çµ±

```typescript
// src/screens/ContentManagementScreen.tsx
import React, { useState, useEffect } from "react";
import { View, Text, TextInput, Button, FlatList, Alert } from "react-native";
import {
  collection,
  addDoc,
  query,
  where,
  getDocs,
  updateDoc,
  doc,
} from "firebase/firestore";
import { auth, db } from "../config/firebase";
import { PhotoUpload } from "../components/PhotoUpload";

interface ContentItem {
  id: string;
  title: string;
  description: string;
  imageUrl?: string;
  category: string;
  createdAt: string;
}

export const ContentManagementScreen: React.FC = () => {
  const [contents, setContents] = useState<ContentItem[]>([]);
  const [newContent, setNewContent] = useState({
    title: "",
    description: "",
    category: "",
    imageUrl: "",
  });

  useEffect(() => {
    loadContents();
  }, []);

  const loadContents = async () => {
    try {
      const q = query(
        collection(db, "tourContents"),
        where("merchantId", "==", auth.currentUser?.uid)
      );
      const querySnapshot = await getDocs(q);
      const contentList: ContentItem[] = [];

      querySnapshot.forEach((doc) => {
        contentList.push({
          id: doc.id,
          ...doc.data(),
        } as ContentItem);
      });

      setContents(contentList);
    } catch (error) {
      console.error("è¼‰å…¥å…§å®¹éŒ¯èª¤:", error);
    }
  };

  const handleAddContent = async () => {
    if (!newContent.title || !newContent.description) {
      Alert.alert("è«‹å¡«å¯«å®Œæ•´è³‡æ–™", "æ¨™é¡Œå’Œæè¿°ç‚ºå¿…å¡«é …ç›®");
      return;
    }

    try {
      const contentData = {
        ...newContent,
        merchantId: auth.currentUser?.uid,
        createdAt: new Date().toISOString(),
        status: "active",
      };

      await addDoc(collection(db, "tourContents"), contentData);

      setNewContent({
        title: "",
        description: "",
        category: "",
        imageUrl: "",
      });

      loadContents();
      Alert.alert("æ–°å¢æˆåŠŸ", "å…§å®¹å·²æˆåŠŸæ–°å¢");
    } catch (error) {
      console.error("æ–°å¢å…§å®¹éŒ¯èª¤:", error);
      Alert.alert("æ–°å¢å¤±æ•—", "è«‹ç¨å¾Œå†è©¦");
    }
  };

  const renderContentItem = ({ item }: { item: ContentItem }) => (
    <View
      style={{
        backgroundColor: "#f9f9f9",
        padding: 15,
        marginVertical: 5,
        borderRadius: 8,
      }}
    >
      <Text style={{ fontSize: 16, fontWeight: "bold", marginBottom: 5 }}>
        {item.title}
      </Text>
      <Text style={{ color: "#666", marginBottom: 5 }}>{item.description}</Text>
      <Text style={{ color: "#999", fontSize: 12 }}>
        åˆ†é¡: {item.category} | å»ºç«‹æ™‚é–“:{" "}
        {new Date(item.createdAt).toLocaleDateString()}
      </Text>
    </View>
  );

  return (
    <View style={{ flex: 1, padding: 20 }}>
      <Text style={{ fontSize: 20, fontWeight: "bold", marginBottom: 20 }}>
        å…§å®¹ç®¡ç†
      </Text>

      <View style={{ marginBottom: 20 }}>
        <TextInput
          placeholder="å…§å®¹æ¨™é¡Œ"
          value={newContent.title}
          onChangeText={(text) => setNewContent({ ...newContent, title: text })}
          style={{
            borderWidth: 1,
            borderColor: "#ddd",
            padding: 10,
            marginBottom: 10,
            borderRadius: 5,
          }}
        />

        <TextInput
          placeholder="å…§å®¹æè¿°"
          value={newContent.description}
          onChangeText={(text) =>
            setNewContent({ ...newContent, description: text })
          }
          multiline
          numberOfLines={3}
          style={{
            borderWidth: 1,
            borderColor: "#ddd",
            padding: 10,
            marginBottom: 10,
            borderRadius: 5,
          }}
        />

        <TextInput
          placeholder="åˆ†é¡"
          value={newContent.category}
          onChangeText={(text) =>
            setNewContent({ ...newContent, category: text })
          }
          style={{
            borderWidth: 1,
            borderColor: "#ddd",
            padding: 10,
            marginBottom: 10,
            borderRadius: 5,
          }}
        />

        <PhotoUpload
          onPhotoUploaded={(imageUrl) =>
            setNewContent({ ...newContent, imageUrl })
          }
        />

        <Button title="æ–°å¢å…§å®¹" onPress={handleAddContent} />
      </View>

      <FlatList
        data={contents}
        keyExtractor={(item) => item.id}
        renderItem={renderContentItem}
        style={{ flex: 1 }}
        ListEmptyComponent={
          <Text style={{ textAlign: "center", color: "#999", marginTop: 50 }}>
            å°šç„¡å…§å®¹ï¼Œè«‹æ–°å¢ç¬¬ä¸€ç­†è³‡æ–™
          </Text>
        }
      />
    </View>
  );
};
```

## Week 3: æ•´åˆèˆ‡æ¸¬è©¦ (Day 15-21)

### âœ… Day 15-17: å¤šèªè¨€æ”¯æ´

#### 1. èªè¨€åˆ‡æ›ç³»çµ±

```typescript
// src/contexts/LanguageContext.tsx
import React, { createContext, useContext, useState } from "react";

type Language = "zh" | "en";

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const translations = {
  zh: {
    welcome: "æ­¡è¿ä½¿ç”¨åœ¨åœ°äººAIå°è¦½",
    login: "ç™»å…¥",
    register: "è¨»å†Š",
    email: "é›»å­ä¿¡ç®±",
    password: "å¯†ç¢¼",
    askQuestion: "è«‹å•é—œæ–¼é€™å€‹æ™¯é»çš„å•é¡Œ...",
    send: "ç™¼é€",
    thinking: "æ€è€ƒä¸­...",
    takePhoto: "æ‹ç…§",
    selectPhoto: "é¸æ“‡ç…§ç‰‡",
    // æ›´å¤šç¿»è­¯...
  },
  en: {
    welcome: "Welcome to Local AI Tour Guide",
    login: "Login",
    register: "Register",
    email: "Email",
    password: "Password",
    askQuestion: "Ask about this attraction...",
    send: "Send",
    thinking: "Thinking...",
    takePhoto: "Take Photo",
    selectPhoto: "Select Photo",
    // æ›´å¤šç¿»è­¯...
  },
};

const LanguageContext = createContext<LanguageContextType | undefined>(
  undefined
);

export const LanguageProvider: React.FC<{ children: React.ReactNode }> = ({
  children,
}) => {
  const [language, setLanguage] = useState<Language>("zh");

  const t = (key: string): string => {
    return translations[language][key] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error("useLanguage must be used within a LanguageProvider");
  }
  return context;
};
```

#### 2. èªè¨€åˆ‡æ›æŒ‰éˆ•

```typescript
// src/components/LanguageSwitch.tsx
import React from "react";
import { TouchableOpacity, Text, View } from "react-native";
import { useLanguage } from "../contexts/LanguageContext";

export const LanguageSwitch: React.FC = () => {
  const { language, setLanguage } = useLanguage();

  return (
    <View style={{ flexDirection: "row", alignItems: "center" }}>
      <TouchableOpacity
        onPress={() => setLanguage("zh")}
        style={{
          padding: 8,
          backgroundColor: language === "zh" ? "#007AFF" : "#f0f0f0",
          borderRadius: 5,
          marginRight: 5,
        }}
      >
        <Text style={{ color: language === "zh" ? "white" : "black" }}>
          ä¸­æ–‡
        </Text>
      </TouchableOpacity>

      <TouchableOpacity
        onPress={() => setLanguage("en")}
        style={{
          padding: 8,
          backgroundColor: language === "en" ? "#007AFF" : "#f0f0f0",
          borderRadius: 5,
        }}
      >
        <Text style={{ color: language === "en" ? "white" : "black" }}>
          English
        </Text>
      </TouchableOpacity>
    </View>
  );
};
```

### âœ… Day 18-21: æ¸¬è©¦èˆ‡éŒ¯èª¤è™•ç†

#### 1. éŒ¯èª¤é‚Šç•Œçµ„ä»¶

```typescript
// src/components/ErrorBoundary.tsx
import React from "react";
import { View, Text, TouchableOpacity } from "react-native";

interface State {
  hasError: boolean;
  error?: Error;
}

interface Props {
  children: React.ReactNode;
}

export class ErrorBoundary extends React.Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    console.error("éŒ¯èª¤é‚Šç•Œæ•ç²éŒ¯èª¤:", error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      return (
        <View
          style={{
            flex: 1,
            justifyContent: "center",
            alignItems: "center",
            padding: 20,
          }}
        >
          <Text style={{ fontSize: 18, marginBottom: 10 }}>
            å“å‘€ï¼Œå‡ºäº†é»å•é¡Œï¼
          </Text>
          <Text
            style={{ color: "#666", marginBottom: 20, textAlign: "center" }}
          >
            æ‡‰ç”¨ç¨‹å¼é‡åˆ°äº†æœªé æœŸçš„éŒ¯èª¤ï¼Œè«‹é‡æ–°å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼ã€‚
          </Text>
          <TouchableOpacity
            onPress={() => this.setState({ hasError: false })}
            style={{
              backgroundColor: "#007AFF",
              padding: 15,
              borderRadius: 8,
            }}
          >
            <Text style={{ color: "white" }}>é‡è©¦</Text>
          </TouchableOpacity>
        </View>
      );
    }

    return this.props.children;
  }
}
```

#### 2. API éŒ¯èª¤è™•ç†

```typescript
// src/utils/errorHandler.ts
export class APIError extends Error {
  constructor(
    message: string,
    public statusCode?: number,
    public originalError?: Error
  ) {
    super(message);
    this.name = "APIError";
  }
}

export const handleAPIError = (error: any): string => {
  if (error instanceof APIError) {
    return error.message;
  }

  if (error.code === "NETWORK_ERROR") {
    return "ç¶²è·¯é€£æ¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯è¨­å®š";
  }

  if (error.code === "TIMEOUT") {
    return "è«‹æ±‚è¶…æ™‚ï¼Œè«‹ç¨å¾Œå†è©¦";
  }

  return "ç™¼ç”ŸæœªçŸ¥éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦";
};
```

## Week 4: éƒ¨ç½²èˆ‡ä¸Šç·š (Day 22-30)

### âœ… Day 22-24: éƒ¨ç½²æº–å‚™

#### 1. ç’°å¢ƒè®Šæ•¸è¨­å®š

```bash
# å»ºç«‹ .env æª”æ¡ˆ
echo "GOOGLE_AI_API_KEY=your_api_key_here" >> .env
echo "FIREBASE_WEB_API_KEY=your_firebase_api_key" >> .env
```

#### 2. å»ºç½®è¨­å®š

```json
// app.json æ›´æ–°
{
  "expo": {
    "name": "åœ¨åœ°äººAIå°è¦½",
    "slug": "localite-ai-tour",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/icon.png",
    "userInterfaceStyle": "light",
    "splash": {
      "image": "./assets/splash.png",
      "resizeMode": "contain",
      "backgroundColor": "#ffffff"
    },
    "assetBundlePatterns": ["**/*"],
    "ios": {
      "supportsTablet": true,
      "bundleIdentifier": "com.localite.aitour"
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/adaptive-icon.png",
        "backgroundColor": "#FFFFFF"
      },
      "package": "com.localite.aitour"
    },
    "web": {
      "favicon": "./assets/favicon.png"
    }
  }
}
```

### âœ… Day 25-28: ç™¼å¸ƒæµç¨‹

#### 1. Expo å»ºç½®

```bash
# å®‰è£ EAS CLI
npm install -g @expo/eas-cli

# ç™»å…¥ Expo
eas login

# è¨­å®šå»ºç½®
eas build:configure

# å»ºç½® Android APK
eas build --platform android --profile preview

# å»ºç½® iOS
eas build --platform ios --profile preview
```

#### 2. æ‡‰ç”¨å•†åº—è³‡æ–™æº–å‚™

- [ ] App åœ–ç¤ºè¨­è¨ˆ (1024x1024)
- [ ] æ‡‰ç”¨ç¨‹å¼æˆªåœ– (å¤šç¨®å°ºå¯¸)
- [ ] æ‡‰ç”¨ç¨‹å¼æè¿°æ–‡æ¡ˆ
- [ ] éš±ç§æ¬Šæ”¿ç­–é é¢
- [ ] æœå‹™æ¢æ¬¾é é¢

### âœ… Day 29-30: ç›£æ§èˆ‡èª¿æ•´

#### 1. åŸºæœ¬åˆ†æè¿½è¹¤

```typescript
// src/utils/analytics.ts
import { collection, addDoc } from "firebase/firestore";
import { db } from "../config/firebase";

export const trackEvent = async (eventName: string, properties?: any) => {
  try {
    await addDoc(collection(db, "analytics"), {
      event: eventName,
      properties: properties || {},
      timestamp: new Date().toISOString(),
      userId: auth.currentUser?.uid,
    });
  } catch (error) {
    console.error("è¿½è¹¤äº‹ä»¶éŒ¯èª¤:", error);
  }
};

// ä½¿ç”¨ç¯„ä¾‹
trackEvent("ai_question_asked", {
  questionLength: question.length,
  hasImage: !!imageUrl,
});
```

#### 2. ç”¨æˆ¶åé¥‹æ”¶é›†

```typescript
// src/screens/FeedbackScreen.tsx
import React, { useState } from "react";
import { View, TextInput, Button, Alert, Text } from "react-native";
import { collection, addDoc } from "firebase/firestore";
import { auth, db } from "../config/firebase";

export const FeedbackScreen: React.FC = () => {
  const [feedback, setFeedback] = useState("");
  const [rating, setRating] = useState(5);

  const submitFeedback = async () => {
    try {
      await addDoc(collection(db, "feedback"), {
        content: feedback,
        rating,
        userId: auth.currentUser?.uid,
        timestamp: new Date().toISOString(),
      });

      Alert.alert("è¬è¬æ‚¨çš„åé¥‹ï¼", "æ‚¨çš„æ„è¦‹å°æˆ‘å€‘å¾ˆé‡è¦ï¼Œæˆ‘å€‘æœƒæŒçºŒæ”¹é€²ã€‚");
      setFeedback("");
      setRating(5);
    } catch (error) {
      console.error("æäº¤åé¥‹éŒ¯èª¤:", error);
      Alert.alert("æäº¤å¤±æ•—", "è«‹ç¨å¾Œå†è©¦");
    }
  };

  return (
    <View style={{ flex: 1, padding: 20 }}>
      <Text style={{ fontSize: 20, marginBottom: 20 }}>æ‚¨çš„åé¥‹</Text>

      <TextInput
        placeholder="è«‹å‘Šè¨´æˆ‘å€‘æ‚¨çš„ä½¿ç”¨é«”é©—å’Œå»ºè­°..."
        value={feedback}
        onChangeText={setFeedback}
        multiline
        numberOfLines={5}
        style={{
          borderWidth: 1,
          borderColor: "#ddd",
          padding: 15,
          marginBottom: 20,
          borderRadius: 8,
          textAlignVertical: "top",
        }}
      />

      <Button title="æäº¤åé¥‹" onPress={submitFeedback} />
    </View>
  );
};
```

## ğŸ¯ é—œéµæª¢æŸ¥é»

### æ¯æ—¥æª¢æŸ¥ (å¿…é ˆå®Œæˆ)

- [ ] Git æäº¤æ¨é€
- [ ] åŠŸèƒ½æ¸¬è©¦é€šé
- [ ] éŒ¯èª¤æ—¥èªŒæª¢æŸ¥
- [ ] æ•ˆèƒ½ç›£æ§ç¢ºèª

### é€±æœ«æª¢æŸ¥ (é‡è¦é‡Œç¨‹ç¢‘)

- [ ] åŠŸèƒ½æ¼”ç¤ºå¯æ­£å¸¸é‹è¡Œ
- [ ] ç”¨æˆ¶åé¥‹æ”¶é›†èˆ‡è™•ç†
- [ ] ä¸‹é€±ä»»å‹™è¦åŠƒèª¿æ•´
- [ ] é¢¨éšªè©•ä¼°èˆ‡æ‡‰å°

## ğŸš¨ ç·Šæ€¥æ‡‰è®Šè¨ˆåŠƒ

### å¦‚æœé‡åˆ°æŠ€è¡“éšœç¤™

1. **API æœå‹™å•é¡Œ** - å•Ÿç”¨é›¢ç·šæ¨¡å¼æˆ–å‚™ç”¨ API
2. **è³‡æ–™åº«é€£æ¥å•é¡Œ** - ä½¿ç”¨æœ¬åœ°å¿«å–æˆ–å‚™ç”¨è³‡æ–™åº«
3. **å»ºç½®å¤±æ•—** - å›é€€åˆ°ä¸Šå€‹ç©©å®šç‰ˆæœ¬

### å¦‚æœæ™‚é–“ä¸è¶³

1. **å„ªå…ˆåŠŸèƒ½** - AI å°è©± > ç…§ç‰‡ä¸Šå‚³ > å•†æˆ¶åŠŸèƒ½
2. **å»¶å¾ŒåŠŸèƒ½** - èªéŸ³æ’­æ”¾ > å¤šèªè¨€ > å•†æˆ¶å¾Œå°
3. **æœ€å°å¯è¡Œç”¢å“** - åƒ…ä¿ç•™ AI å°è©±å’ŒåŸºæœ¬èªè­‰

---

**é€™ä»½æª¢æŸ¥æ¸…å–®ç¢ºä¿ 30 å¤©å…§èƒ½å¤ äº¤ä»˜å¯ç”¨çš„ MVPï¼Œå°ˆæ³¨æ–¼é©—è­‰æ ¸å¿ƒå‡è¨­è€Œéå®Œç¾ç”¢å“ã€‚**

