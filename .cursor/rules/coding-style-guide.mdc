# Localite-V6 ç·¨ç¢¼é¢¨æ ¼è¦ç¯„æŒ‡å—

version: 1.0.0
createDate: 2025-08-23

## åŠŸèƒ½æè¿°

çµ±ä¸€å°ˆæ¡ˆç·¨ç¢¼æ¨™æº–ï¼Œéµå¾ª Google é–‹ç™¼è€…é¢¨æ ¼æŒ‡å—ï¼Œä½¿ç”¨è‡ªå‹•åŒ–å·¥å…·ç¢ºä¿ç¨‹å¼ç¢¼å“è³ªä¸€è‡´æ€§ï¼Œæ”¯æ´ä»»å‹™å°å‘çš„éŒ¯èª¤ä¿®å¾©ç­–ç•¥ã€‚

## çµ±ä¸€ç·¨ç¢¼æ¨™æº–

### åŸºæœ¬åŸå‰‡

- **ä¸€è‡´æ€§**: æ‰€æœ‰ç¨‹å¼ç¢¼éµå¾ªç›¸åŒæ ¼å¼å’Œé¢¨æ ¼
- **å¯è®€æ€§**: ç¨‹å¼ç¢¼æ¸…æ™°æ˜“æ‡‚ï¼Œè®Šæ•¸å’Œå‡½æ•¸å‘½åå…·æœ‰æè¿°æ€§
- **å¯ç¶­è­·æ€§**: çµæ§‹åŒ–ç¨‹å¼ç¢¼ï¼Œæ˜“æ–¼ä¿®æ”¹å’Œæ“´å±•
- **è‡ªå‹•åŒ–**: ä½¿ç”¨å·¥å…·è‡ªå‹•æª¢æŸ¥å’Œæ ¼å¼åŒ–ç¨‹å¼ç¢¼

## ESLint é…ç½®æ¨™æº–

### æ ¹ç›®éŒ„é…ç½®

```javascript
// .eslintrc.js (æ ¹ç›®éŒ„)
module.exports = {
  root: true,
  env: {
    node: true,
    es2021: true,
  },
  extends: ["eslint:recommended", "airbnb-base"],
  parserOptions: {
    ecmaVersion: 12,
    sourceType: "module",
  },
  rules: {
    // å­—ä¸²é¢¨æ ¼
    quotes: ["error", "single"],

    // çµå°¾é€—è™Ÿ
    "comma-dangle": ["error", "always-multiline"],

    // å‡½æ•¸è¿”å›å€¼ä¸€è‡´æ€§
    "consistent-return": "error",

    // é¡åˆ¥æ–¹æ³•ä½¿ç”¨ this
    "class-methods-use-this": "warn",

    // è®Šæ•¸å‘½å
    camelcase: ["error", { properties: "never", ignoreDestructuring: false }],

    // ç¨‹å¼ç¢¼è¤‡é›œåº¦
    complexity: ["warn", { max: 10 }],

    // å‡½æ•¸é•·åº¦é™åˆ¶
    "max-lines-per-function": [
      "warn",
      { max: 50, skipBlankLines: true, skipComments: true },
    ],
  },
  overrides: [
    {
      files: ["frontend/**/*.{js,jsx}"],
      extends: ["eslint:recommended", "plugin:react/recommended"],
      env: {
        browser: true,
        es2021: true,
      },
      rules: {
        "react/prop-types": "off",
        "react/react-in-jsx-scope": "off", // React 17+
        "react/jsx-uses-react": "off",
      },
    },
    {
      files: ["mobile/**/*.{js,jsx}"],
      extends: ["eslint:recommended", "plugin:react-native/recommended"],
      env: {
        "react-native/react-native": true,
      },
      rules: {
        "react-native/no-unused-styles": "error",
        "react-native/split-platform-components": "warn",
      },
    },
    {
      files: ["backend/**/*.js"],
      rules: {
        "no-console": "off", // å¾Œç«¯å…è¨±ä½¿ç”¨ console
        "import/no-extraneous-dependencies": [
          "error",
          { devDependencies: true },
        ],
      },
    },
    {
      files: ["**/*.test.js", "**/*.spec.js", "__tests__/**/*.js"],
      env: {
        jest: true,
      },
      rules: {
        "no-unused-expressions": "off",
        "max-lines-per-function": "off", // æ¸¬è©¦æª”æ¡ˆå…è¨±è¼ƒé•·å‡½æ•¸
      },
    },
  ],
};
```

### TypeScript å°ˆæ¡ˆé¡å¤–é…ç½®

```javascript
// .eslintrc.js (TypeScript å°ˆæ¡ˆ)
module.exports = {
  parser: "@typescript-eslint/parser",
  extends: [
    "eslint:recommended",
    "@typescript-eslint/recommended",
    "airbnb-typescript",
  ],
  rules: {
    "@typescript-eslint/no-explicit-any": "warn",
    "@typescript-eslint/explicit-function-return-type": "off",
    "@typescript-eslint/explicit-module-boundary-types": "off",
  },
};
```

## Prettier é…ç½®

### åŸºç¤é…ç½®

```json
// .prettierrc
{
  "singleQuote": true,
  "trailingComma": "es5",
  "tabWidth": 2,
  "semi": true,
  "printWidth": 100,
  "bracketSpacing": true,
  "arrowParens": "avoid",
  "endOfLine": "lf",
  "useTabs": false
}
```

### å°ˆæ¡ˆç‰¹å®šå¿½ç•¥è¨­å®š

```bash
# .prettierignore
node_modules/
dist/
build/
coverage/
*.min.js
*.min.css
package-lock.json
yarn.lock
```

## ESLint éŒ¯èª¤è™•ç†ç­–ç•¥

### ä¿®å¾©å„ªå…ˆç´šç­–ç•¥

åŸºæ–¼å°ˆæ¡ˆç¶“é©—ï¼Œæ¡ç”¨ä»»å‹™å°å‘çš„ ESLint ä¿®å¾©ç­–ç•¥ï¼š

#### 1. ğŸ”´ é«˜å„ªå…ˆç´šï¼ˆç«‹å³ä¿®å¾©ï¼‰

- **ä»»å‹™ç›¸é—œéŒ¯èª¤**: ç«‹å³ä¿®å¾©èˆ‡ç•¶å‰ä»»å‹™ç›´æ¥ç›¸é—œçš„ ESLint éŒ¯èª¤
- **é˜»æ“‹æ€§éŒ¯èª¤**: å°è‡´ç¨‹å¼ç„¡æ³•æ­£å¸¸åŸ·è¡Œçš„éŒ¯èª¤
- **å®‰å…¨æ€§å•é¡Œ**: å¯èƒ½é€ æˆå®‰å…¨æ¼æ´çš„ç¨‹å¼ç¢¼

#### 2. ğŸŸ¡ ä¸­å„ªå…ˆç´šï¼ˆä»»å‹™å®Œæˆå¾Œè™•ç†ï¼‰

- **ç¨‹å¼ç¢¼å“è³ªè­¦å‘Š**: ä¸å½±éŸ¿åŠŸèƒ½ä½†å½±éŸ¿å¯è®€æ€§çš„è­¦å‘Š
- **æ•ˆèƒ½ç›¸é—œå»ºè­°**: å¯èƒ½å½±éŸ¿æ•ˆèƒ½çš„ç¨‹å¼ç¢¼çµæ§‹

#### 3. ğŸŸ¢ ä½å„ªå…ˆç´šï¼ˆæ‰¹é‡è™•ç†ï¼‰

- **éç›¸é—œéŒ¯èª¤**: è¨˜éŒ„åœ¨ä»»å‹™ç­†è¨˜ä¸­ï¼Œç•™å¾…å¾ŒçºŒä»»å‹™è™•ç†
- **é¢¨æ ¼ä¸ä¸€è‡´**: ä¸å½±éŸ¿åŠŸèƒ½çš„ç´”æ ¼å¼å•é¡Œ

### ESLint éŒ¯èª¤ä¿®å¾©æŒ‡å—

```bash
# 1. æª¢æŸ¥ç•¶å‰éŒ¯èª¤
npm run lint

# 2. è‡ªå‹•ä¿®å¾©èƒ½ä¿®å¾©çš„å•é¡Œ
npm run lint:fix

# 3. æŸ¥çœ‹å‰©é¤˜éœ€è¦æ‰‹å‹•ä¿®å¾©çš„å•é¡Œ
npm run lint -- --fix-dry-run

# 4. é‡å°ç‰¹å®šæª”æ¡ˆä¿®å¾©
npm run lint -- --fix src/specific-file.js

# 5. é‡å°ç‰¹å®šé¡å‹éŒ¯èª¤ä¿®å¾©
npm run lint -- --fix --rule "quotes,comma-dangle"

# 6. å¦‚æœéŒ¯èª¤éå¤šå½±éŸ¿é–‹ç™¼æµç¨‹ï¼Œå¯ä»¥æš«æ™‚è·³é pre-commit
git commit --no-verify -m "feat: implement feature (ESLint fixes pending)"

# 7. æ‰¹é‡ä¿®å¾©ç‰¹å®šç›®éŒ„
npm run lint -- --fix frontend/
npm run lint -- --fix backend/
```

### éŒ¯èª¤è™•ç†æ±ºç­–æ¨¹

```
ESLint éŒ¯èª¤ â†’ æ˜¯å¦èˆ‡ç•¶å‰ä»»å‹™ç›¸é—œï¼Ÿ
              â”œâ”€ æ˜¯ â†’ ç«‹å³ä¿®å¾©
              â””â”€ å¦ â†’ æ˜¯å¦é˜»æ“‹ç¨‹å¼åŸ·è¡Œï¼Ÿ
                      â”œâ”€ æ˜¯ â†’ ç«‹å³ä¿®å¾©
                      â””â”€ å¦ â†’ è¨˜éŒ„åˆ°ä»»å‹™ç­†è¨˜ï¼Œç¨å¾Œè™•ç†
```

## ç¨‹å¼ç¢¼å“è³ªæŒ‡æ¨™

### å¿…é ˆé”æˆæŒ‡æ¨™

- **ESLint éŒ¯èª¤**: 0 å€‹ errorï¼ˆå¿…é ˆï¼‰
- **TypeScript éŒ¯èª¤**: 0 å€‹ç·¨è­¯éŒ¯èª¤ï¼ˆTypeScript å°ˆæ¡ˆï¼‰
- **Prettier æ ¼å¼**: è‡ªå‹•æ ¼å¼åŒ–ï¼Œç„¡æ ¼å¼ä¸ä¸€è‡´

### å»ºè­°é”æˆæŒ‡æ¨™

- **ESLint è­¦å‘Š**: ç›¡é‡æ¸›å°‘ï¼Œä¸è¶…é 10 å€‹ warning
- **æ¸¬è©¦è¦†è“‹ç‡**: 80% ä»¥ä¸Šï¼ˆTDD æµç¨‹ä¸‹æ‡‰æ›´å®¹æ˜“é”æˆï¼‰
- **ç¨‹å¼ç¢¼è¤‡é›œåº¦**: æ¯å€‹å‡½æ•¸ä¸è¶…é 10 å€‹å¾ªç’°è¤‡é›œåº¦
- **å‡½æ•¸é•·åº¦**: æ¯å€‹å‡½æ•¸ä¸è¶…é 50 è¡Œï¼ˆä¸å«è¨»é‡‹å’Œç©ºè¡Œï¼‰

### ç¨‹å¼ç¢¼è¨»é‡‹æ¨™æº–

- **æ‰€æœ‰ public API** å¿…é ˆæœ‰ JSDoc è¨»é‡‹
- **è¤‡é›œé‚è¼¯** éœ€è¦è§£é‡‹æ€§è¨»é‡‹
- **TODO è¨»é‡‹** å¿…é ˆåŒ…å«è² è²¬äººå’Œæ™‚é–“

```javascript
/**
 * è¨ˆç®—ç”¨æˆ¶æ¨è–¦åˆ†æ•¸
 * @param {string} userId - ç”¨æˆ¶ID
 * @param {Object} preferences - ç”¨æˆ¶åå¥½è¨­å®š
 * @param {number} preferences.categoryWeight - é¡åˆ¥æ¬Šé‡
 * @returns {Promise<number>} æ¨è–¦åˆ†æ•¸ (0-100)
 * @throws {Error} ç•¶ç”¨æˆ¶ä¸å­˜åœ¨æ™‚æ‹‹å‡ºéŒ¯èª¤
 */
async function calculateRecommendationScore(userId, preferences) {
  // TODO: å„ªåŒ–è¨ˆç®—æ¼”ç®—æ³• - @fuchangwei 2025-01-30
  // è¤‡é›œçš„æ¨è–¦æ¼”ç®—æ³•å¯¦ä½œ...
}
```

## å‘½åè¦ç¯„

### è®Šæ•¸å‘½å

```javascript
// âœ… è‰¯å¥½çš„å‘½å
const userPreferences = getUserPreferences();
const isAuthenticated = checkAuthStatus();
const MAX_RETRY_COUNT = 3;

// âŒ ä¸è‰¯çš„å‘½å
const data = getData();
const flag = checkStatus();
const num = 3;
```

### å‡½æ•¸å‘½å

```javascript
// âœ… å‹•è©é–‹é ­ï¼Œæè¿°åŠŸèƒ½
function calculateTotalPrice() {}
function validateEmailFormat() {}
function getUserByEmail() {}

// âŒ ä¸æ¸…æ¥šçš„å‡½æ•¸å
function process() {}
function check() {}
function handle() {}
```

### æª”æ¡ˆå‘½åè¦ç¯„

```
frontend/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ UserProfile.jsx          // å…ƒä»¶ï¼šPascalCase
â”‚   â”œâ”€â”€ user-settings.module.css // CSS æ¨¡çµ„ï¼škebab-case
â”‚   â””â”€â”€ index.js                 // ç´¢å¼•æª”æ¡ˆï¼šå°å¯«
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ formatHelper.js          // å·¥å…·å‡½æ•¸ï¼šcamelCase
â”‚   â””â”€â”€ constants.js             // å¸¸æ•¸ï¼šcamelCase
â””â”€â”€ pages/
    â”œâ”€â”€ user-dashboard.jsx       // é é¢ï¼škebab-case
    â””â”€â”€ settings.jsx
```

## Git æäº¤è¨Šæ¯è¦ç¯„

```bash
# æ ¼å¼ï¼š<type>(<scope>): <description>
feat(auth): implement user login functionality
fix(api): resolve user data fetching issue
docs(readme): update installation instructions
refactor(ui): simplify user profile component
test(auth): add login integration tests
chore(deps): update eslint to v8.0.0

# è©³ç´°æè¿°ï¼ˆå¯é¸ï¼‰
feat(payment): integrate Stripe payment gateway

- Add payment processing service
- Implement webhook handling
- Add payment status tracking
- Update user dashboard with payment history

Closes #123
```

## é è¨­ npm è…³æœ¬

```json
{
  "scripts": {
    "lint": "eslint . --ext .js,.jsx,.ts,.tsx",
    "lint:fix": "eslint . --ext .js,.jsx,.ts,.tsx --fix",
    "format": "prettier --write .",
    "format:check": "prettier --check .",
    "quality": "npm run lint && npm run format:check",
    "quality:fix": "npm run lint:fix && npm run format",
    "pre-commit": "npm run quality:fix && npm test",
    "validate": "npm run quality && npm test && npm run build"
  }
}
```

## Git Hook æ•´åˆ

### Husky è¨­å®š

```json
// package.json
{
  "husky": {
    "hooks": {
      "pre-commit": "npm run pre-commit",
      "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
    }
  }
}
```

### lint-staged è¨­å®š

```json
// package.json
{
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": ["eslint --fix", "prettier --write"],
    "*.{json,md,css,scss}": ["prettier --write"]
  }
}
```

## IDE æ•´åˆè¨­å®š

### VSCode è¨­å®š

```json
// .vscode/settings.json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "eslint.workingDirectories": ["frontend", "backend"],
  "files.associations": {
    "*.mdc": "markdown"
  }
}
```

### VSCode å»ºè­°æ“´å……å¥—ä»¶

```json
// .vscode/extensions.json
{
  "recommendations": [
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "ms-vscode.vscode-typescript-next",
    "bradlc.vscode-tailwindcss"
  ]
}
```

## ç‰¹æ®Šæƒ…æ³è™•ç†

### ç¬¬ä¸‰æ–¹ç¨‹å¼ç¢¼å¿½ç•¥

```javascript
// eslint-disable-next-line
const thirdPartyCode = require("legacy-library");

/* eslint-disable */
// å¤§æ®µç¬¬ä¸‰æ–¹ç¨‹å¼ç¢¼
/* eslint-enable */
```

### æ¸¬è©¦æª”æ¡ˆç‰¹æ®Šè¦å‰‡

```javascript
// æ¸¬è©¦æª”æ¡ˆä¸­å…è¨±çš„ç‰¹æ®Šå¯«æ³•
describe("User Service", () => {
  // eslint-disable-next-line max-lines-per-function
  it("should handle complex user creation scenario", async () => {
    // é•·æ¸¬è©¦æ¡ˆä¾‹...
  });
});
```

## èˆ‡å…¶ä»–è¦ç¯„çš„é—œè¯

- **ä¾è³´**: `@develop-by-task.mdc` - é–‹ç™¼æµç¨‹è¦ç¯„
- **æ•´åˆ**: `@terminal-commands.mdc` - ç›¸é—œæŒ‡ä»¤æ¨™æº–åŒ–
- **åƒè€ƒ**: Google é–‹ç™¼è€…é¢¨æ ¼æŒ‡å—
- **å·¥å…·**: ESLint, Prettier, Husky, lint-staged
- **æ”¯æ´**: VSCode, WebStorm ç­‰ IDE æ•´åˆ

## ç‰ˆæœ¬è¨˜éŒ„

- v1.0.0 (2025-01-25): å¾ develop-by-task è¦ç¯„ä¸­ç¨ç«‹å‡ºç·¨ç¢¼é¢¨æ ¼éƒ¨åˆ†
  - æ–°å¢ TypeScript å°ˆæ¡ˆé…ç½®
  - æ–°å¢ Git æäº¤è¨Šæ¯è¦ç¯„
  - æ–°å¢ IDE æ•´åˆè¨­å®š
  - æ–°å¢ç‰¹æ®Šæƒ…æ³è™•ç†æŒ‡å—
